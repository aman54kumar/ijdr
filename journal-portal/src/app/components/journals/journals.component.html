<div class="modern-journals">
  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <div class="header-content text-center">
        <h1 class="page-title font-display">
          Available <span class="gradient-text">Journals</span>
        </h1>
        <p class="page-subtitle">
          Explore our comprehensive collection of peer-reviewed research
          publications
        </p>
      </div>
    </div>
  </section>

  <!-- Search Section -->
  <section class="search-section">
    <div class="container">
      <div class="search-wrapper">
        <div class="search-box">
          <div class="search-icon">
            <i class="bi bi-search"></i>
          </div>
          <input
            type="text"
            class="search-input"
            placeholder="Search by volume, number, year, or keyword..."
            [(ngModel)]="searchText"
            (input)="searchJournals()"
          />
          <button
            class="search-clear"
            *ngIf="searchText"
            (click)="clearSearch()"
          >
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
        <div class="search-stats" *ngIf="!loading">
          <p class="result-count">
            <span class="count">{{ filteredJournalsList.length }}</span>
            {{ filteredJournalsList.length === 1 ? "journal" : "journals" }}
            found
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Journals Grid -->
  <section class="journals-grid">
    <div class="container">
      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <div class="loading-spinner">
          <div class="spinner"></div>
          <p class="loading-text">Loading journals...</p>
        </div>
        <div class="skeleton-grid">
          <div class="skeleton-card" *ngFor="let i of [1, 2, 3, 4, 5, 6]">
            <div class="skeleton-header loading-shimmer"></div>
            <div class="skeleton-body">
              <div class="skeleton-line loading-shimmer"></div>
              <div class="skeleton-line loading-shimmer"></div>
              <div class="skeleton-button loading-shimmer"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Journals List -->
      <div *ngIf="!loading" class="journals-list">
        <!-- Grouped by Year Display -->
        <div *ngIf="yearKeys.length > 0" class="journals-by-year">
          <div *ngFor="let year of yearKeys" class="year-group">
            <!-- Year Header -->
            <div class="year-header">
              <h3 class="year-title">
                <i class="bi bi-calendar-event me-2"></i>
                {{ year }}
              </h3>
              <span class="year-count">
                {{ groupedJournals[year].length }}
                {{
                  groupedJournals[year].length === 1 ? "Journal" : "Journals"
                }}
              </span>
            </div>

            <!-- Journals Grid for this Year -->
            <div class="row g-4 mb-5">
              <div
                class="col-xl-6 col-lg-6"
                *ngFor="
                  let journal of groupedJournals[year];
                  trackBy: trackByJournal
                "
              >
                <app-card
                  [title]="journal.title"
                  [showImage]="false"
                  [badge]="{ icon: 'bi bi-journal-bookmark' }"
                  [meta]="getJournalMeta(journal)"
                  [stats]="getJournalStats(journal)"
                  [actions]="getJournalActions(journal)"
                  cardClass="journal-card-grouped"
                >
                  <div class="journal-preview">
                    <!-- Edition Badge -->
                    <div class="edition-badge-container mb-2">
                      <span
                        class="edition-badge"
                        [class.jan-jun]="journal.edition === 'January-June'"
                        [class.jul-dec]="journal.edition === 'July-December'"
                      >
                        {{
                          journal.edition === "July-December"
                            ? "Jul-Dec"
                            : "Jan-Jun"
                        }}
                      </span>
                    </div>

                    <p class="journal-description" *ngIf="journal.description">
                      {{ journal.description | truncate : 120 }}
                    </p>
                    <!-- Clean description only - no redundant badges -->
                  </div>
                </app-card>
              </div>
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="yearKeys.length === 0" class="empty-state">
          <div class="empty-content">
            <div class="empty-icon">
              <i class="bi bi-search"></i>
            </div>
            <h3 class="empty-title">No journals found</h3>
            <p class="empty-subtitle">
              We couldn't find any journals matching your search criteria. Try
              adjusting your search terms or browse all journals.
            </p>
            <button class="btn btn-outline-primary" (click)="clearSearch()">
              <i class="bi bi-arrow-clockwise me-2"></i>
              Clear Search
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
